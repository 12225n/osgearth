<FeatureImage name="OSM Density Mask" sdf="true" min_level="14" max_data_level="18" visible="true">
    <cache_policy usage="none"/>
    <profile>spherical-mercator</profile>
    <features>data:osm</features>
    <!--
    <filters>
        <script>
          <![CDATA[
            ("highway" in feature.properties) ||
            ("building" in feature.properties) ||
            ("natural" in feature.properties && feature.properties.natural === "water")
          ]]>
        </script>
    </filters>
    -->
    <styles>
        <style type="text/css">
            highway {
                render-sdf-min-distance: 5;
                render-sdf-max-distance: 15;
            }
            building {
                render-sdf-min-distance: 1;
                render-sdf-max-distance: 3;
            }
            water {
                render-sdf-min-distance: 5;
                render-sdf-max-distance: 5;
            }
        </style>
        <script language="javascript">
          <![CDATA[
            function getStyle() {
                if ("highway" in feature.properties) return "highway";
                if ("building" in feature.properties) return "building";
                if ("natural" in feature.properties && feature.properties.natural === "water") return "water";
                return null;
            }
          ]]>
        </script>
        <selector class_expr="getStyle()"/>
    </styles>
</FeatureImage>
